-- Hoogle documentation, generated by Haddock
-- See Hoogle, http://www.haskell.org/hoogle/


-- | Relation-mapping operators in Koshucode
--   
--   An impelemntation of relation-mapping operators. Operators are used in
--   the <tt>koshu</tt> calculator that is contained in the
--   <tt>koshucode-baala-calculator</tt> package.
@package koshucode-baala-rop-flat
@version 0.163.0.0


-- | Partial-order scale.
module Koshucode.Baala.Rop.Flat.PoScale

-- | Mapping from element to subelements and scale. Scale of element is
--   defined by 1 + the maximum scale of subelements. If elements are
--   cyclic, scales of these elements are -1.
type PoScale a = Map a ([a], Maybe Int)
type PoScaleCalc a = [(a, a)] -> [(a, Int)]

-- | Extract partial-order scales.
poScale :: PoScale a -> [(a, Int)]
poScaleHeight :: (Ord a) => PoScaleCalc a
poScaleDepth :: (Ord a) => PoScaleCalc a

-- | Calculate partial-order height.
poHeight :: (Ord a) => [(a, a)] -> PoScale a

-- | Calculate partial-order depth.
poDepth :: (Ord a) => [(a, a)] -> PoScale a

module Koshucode.Baala.Rop.Base.Message

-- | Require <i>N</i> relmaps
reqRelmap :: Int -> Ab a

-- | Attribute not found
noAttr :: String -> Ab a

-- | Not implemented
notImpl :: Ab a

module Koshucode.Baala.Rop.Flat.Message

-- | check-term failed
checkTerm :: String -> [TermName] -> Head -> Ab a

-- | Different headings
diffHead :: [Head] -> Ab a

-- | Duplicate term name
dupTerm :: [TermName] -> Head -> Ab a

-- | Dump content expression
dumpCox :: (Show c) => c -> Ab a

-- | Dump relation
dumpRel :: (CRel c, MixShortEncode c) => Rel c -> Ab a

-- | Dump token trees
dumpTrees :: [TTree] -> Ab a

-- | Odd attribute
oddAttr :: Ab a

-- | Require Boolean
reqBool :: Ab a

-- | Require relation
reqRel :: Ab a

-- | Require collection type
reqCollection :: Ab a

-- | Require data interpretation
reqInterp :: Ab a

-- | Require new term names
reqNewTerm :: [TermName] -> Head -> Ab a

-- | Require unary function
reqUnaryFn :: Ab a

-- | Unexpected term names
unexpTermName :: Ab a
unmatchShare :: [TermName] -> [TermName] -> Ab a


-- | Parsing list of terms.
module Koshucode.Baala.Rop.Base.Term

-- | Extract a term name.
termName :: TTree -> Ab TermName

-- | Extract a list of term names.
--   
--   <pre>
--   &gt;&gt;&gt; termNames B.&lt;=&lt; D.tt $ "/a /b /c"
--   Right ["a", "b", "c"]
--   </pre>
termNames :: [TTree] -> Ab [TermName]
termNamesCo :: [TTree] -> Ab (Bool, [TermName])

-- | Extract a signed term name.
signedTermName :: TTree -> Ab SignedTermName
signedTermNames :: [TTree] -> Ab [SignedTermName]

-- | Extract a list of name-and-name pairs.
--   
--   <pre>
--   &gt;&gt;&gt; termNamePairs =&lt;&lt; D.tt "/a /x /b /y"
--   Right [("/a", "/x"), ("/b", "/y")]
--   </pre>
termNamePairs :: [TTree] -> Ab [TermName2]
termNamesColon :: [TTree] -> Ab [[TermName]]
picker :: Head -> [TermName] -> Map [c]


-- | Attribute getters: Extract attribute from use of relmap.
module Koshucode.Baala.Rop.Base.Get
type RopGet c a = Intmed c  Use of relmap operator -> String  Name of keyword, e.g., @\"-term\"@ -> Ab a  Attribute of relmap
getTag :: Intmed c -> String -> Bool

-- | Get usage tags.
getTags :: Intmed c -> [String]

-- | Get optional parameter with default value.
getOption :: a -> RopGet c a -> RopGet c a

-- | Get parameter whenever given or not.
getMaybe :: RopGet c a -> RopGet c (Maybe a)

-- | Get <tt>True</tt> when attribute is given, <tt>False</tt> otherwise.
getSwitch :: Intmed c -> String -> Ab Bool

-- | Get word from named attribute.
--   
--   <pre>
--   consXxx :: RopCons c
--   consXxx med = do
--     sign &lt;- getWord med "-sign"
--     ...
--   </pre>
getWord :: RopGet c String

-- | Get trees as single tree.
getTree :: RopGet c TTree

-- | Get trees from parameter.
getTrees :: RopGet c [TTree]
getWordTrees :: RopGet c [Named TTree]
getTreesByColon :: RopGet c [[TTree]]

-- | Get a relmap from operator use.
--   
--   <pre>
--   consMeet :: (Ord c) =&gt; RopCons c
--   consMeet med = do
--     m &lt;- getRelmap med "-relmap"
--     Right $ relmapMeet med m
--   </pre>
getRelmap :: Intmed c -> String -> Ab (Relmap c)
getOptRelmap :: Relmap c -> Intmed c -> String -> Ab (Relmap c)

-- | Get a term name from named attribute.
getTerm :: RopGet c TermName
getTerm2 :: RopGet c (TermName, TermName)
getTermOpt :: RopGet c (Maybe TermName)

-- | Get list of term names from named attribute.
getTerms :: RopGet c [TermName]
getSignedTerms :: RopGet c [SignedTermName]

-- | Get term names and complement sign (<tt>~</tt>) .
getTermsCo :: RopGet c (Bool, [TermName])

-- | Get list of term-name pairs from named attribute.
getTermPairs :: RopGet c [TermName2]
getTermsColon :: RopGet c [[TermName]]
getTermTrees :: RopGet c [Named TTree]


-- | Definition of relmap operators.
module Koshucode.Baala.Rop.Base.Define

-- | Constructor, usage, and attribute sorter
type RopDefine c = (RopCons c, RopUsage, AttrLayout)

-- | Make implementations of relmap operators.
ropList :: String -> [RopDefine c] -> [Rop c]

-- | Make definition of relmap operator.
def :: RopCons c -> RopUsage -> String -> RopDefine c


-- | Built-in relmap operator.
module Koshucode.Baala.Rop.Base.Rop

-- | Built-in relmap operator.
--   
--   <ul>
--   <li><i><i>r</i> <tt>|</tt> <i>s</i></i> Append relmaps</li>
--   <li><i><tt>id</tt></i> Identity relmap</li>
--   </ul>
ropsBuiltin :: [Rop c]
consId :: RopCons c

-- | Create <tt>id</tt> relmap.
relmapId :: Intmed c -> Relmap c

-- | Placeholder for unimplemented operator.
consXxx :: RopCons c


-- | Builtin relmap operator.
module Koshucode.Baala.Rop.Base

module Koshucode.Baala.Rop.Flat.Meta

-- | Implementation of relational operators.
--   
--   <ul>
--   <li><i><tt>koshu-cop /N</tt></i> Retrieve list of content
--   operators.</li>
--   <li><i><tt>koshu-cop-infix /N [ -height /N ][ -dir /N ]</tt></i>
--   Retrieve list of infix specifications.</li>
--   <li><i><tt>koshu-rop /N</tt></i> Retrieve list of relmap
--   operators.</li>
--   <li><i><tt>koshu-version /N</tt></i> Get version number of the koshu
--   calculator.</li>
--   </ul>
ropsMeta :: (CContent c) => [Rop c]
consKoshuCop :: CContent c => RopCons c

-- | Create <tt>koshu-cop</tt> relkit.
relkitKoshuCop :: (CContent c) => TermName -> RelkitHook c
consKoshuCopInfix :: (CContent c) => RopCons c

-- | Create <tt>koshu-cop-infix</tt> relkit.
relkitKoshuCopInfix :: (CContent c) => (TermName, Maybe TermName, Maybe TermName) -> RelkitHook c
consKoshuSource :: (CContent c) => RopCons c

-- | Create <tt>koshu-source</tt> relmap.
relmapKoshuSource :: (CContent c) => Intmed c -> (TermName, Maybe TermName, Maybe TermName) -> Relmap c
consKoshuRop :: (CContent c) => RopCons c

-- | Create <tt>koshu-rop</tt> relkit.
relkitKoshuRop :: (CContent c) => (Maybe TermName, Maybe TermName, Maybe TermName) -> RelkitHook c
consKoshuProxy :: (CContent c) => RopCons c

-- | Create <tt>koshu-proxy</tt> relkit.
relkitKoshuProxy :: (CContent c) => (Maybe TermName, Maybe TermName) -> RelkitHook c
consKoshuVersion :: (CContent c) => RopCons c

-- | Create <tt>koshu-version</tt> relkit.
relkitKoshuVersion :: (CContent c) => TermName -> RelkitHook c

module Koshucode.Baala.Rop.Flat.Order

-- | Pseudorelmap operators for term and tuple ordering.
ropsOrder :: (Ord c) => [Rop c]
consForward :: RopCons c

-- | Create <tt>forward</tt> relmap.
relmapForward :: Intmed c -> [TermName] -> Relmap c
consBackward :: RopCons c

-- | Create <tt>backward</tt> relmap.
relmapBackward :: Intmed c -> [TermName] -> Relmap c
consLexical :: RopCons c

-- | Create <tt>lexical</tt> relmap.
relmapLexical :: Intmed c -> Relmap c
consOrder :: (Ord c) => RopCons c

-- | Create <tt>order</tt> relmap.
relmapOrder :: (Ord c) => Intmed c -> [SignedTermName] -> Relmap c

-- | Create <tt>order</tt> relkit.
relkitOrder :: (Ord c) => [SignedTermName] -> RelkitFlow c

module Koshucode.Baala.Rop.Flat.Resource

-- | Relmap operators about resources.
--   
--   <ul>
--   <li><i><tt>koshu-res-rop /N /N</tt></i> Derived relmap operators in
--   the current resource.</li>
--   <li><i><tt>koshu-res-sink /N /N</tt></i> Judgement patterns of sinks
--   in the current resource.</li>
--   </ul>
ropsResource :: (CContent c) => [Rop c]
consKoshuResRop :: (CContent c) => RopCons c

-- | Create <tt>koshu-res-rop</tt> relkit.
relkitKoshuResRop :: (CContent c) => (TermName, TermName) -> RelkitHook c
consKoshuResSink :: (CContent c) => RopCons c

-- | Create <tt>koshu-res-sink</tt> relkit.
relkitKoshuResSink :: (CContent c) => (TermName, TermName) -> RelkitHook c
consKoshuResArticle :: (CContent c) => RopCons c

-- | Create <tt>koshu-res-article</tt> relkit.
relkitKoshuResArticle :: (CContent c) => TermName -> RelkitHook c

module Koshucode.Baala.Rop.Flat.Source

-- | Implementation of relational operators.
--   
--   <ul>
--   <li><i><tt>dee</tt></i> Nullary full relation.</li>
--   <li><i><tt>dum</tt></i> Nullary empty relation.</li>
--   <li><i><tt>empty</tt></i> Make empty relation.</li>
--   <li><i><tt>source</tt></i> Read relation from data source.</li>
--   </ul>
ropsSource :: (CContent c) => [Rop c]
consDee :: RopCons c
consDum :: RopCons c
consEmpty :: RopCons c

-- | Create <tt>empty</tt> relmap.
relmapEmpty :: Intmed c -> [TermName] -> Relmap c
consSource :: RopCons c
consSourceTerm :: RopCons c

-- | Create <tt>source-term</tt> relmap.
relmapSourceTerm :: Intmed c -> String -> Map (Relmap c)


-- | Relmap operators for manipulating term names.
module Koshucode.Baala.Rop.Flat.Term

-- | Relmap operators for manipulating term names.
--   
--   <ul>
--   <li><i><tt>cut</tt></i> Project relation to unspecified terms.</li>
--   <li><i><tt>cut-term</tt></i> Project relation to terms not in relmap
--   output.</li>
--   <li><i><tt>pick</tt></i> Project relation to specified terms.</li>
--   <li><i><tt>pick-term</tt></i> Project relation to terms in relmap
--   output.</li>
--   <li><i><tt>rename</tt></i> Change term name.</li>
--   <li><i><tt>move</tt></i> Change heading.</li>
--   </ul>
ropsTerm :: (Ord c) => [Rop c]

-- | <b>pick /P ...</b>
--   
--   Construct <tt>pick</tt> relmap operator for relational projection by
--   picking terms.
consPick :: RopCons c

-- | Create <tt>pick</tt> relmap.
relmapPick :: Intmed c -> [TermName] -> Relmap c

-- | Create <tt>pick</tt> relkit.
relkitPick :: [TermName] -> RelkitFlow c

-- | <b>cut /P ...</b>
--   
--   Construct <tt>cut</tt> relmap operator for relational projection by
--   cutting terms. This operator is an inversion of <tt>pick</tt>.
consCut :: RopCons c

-- | Create <tt>cut</tt> relmap.
relmapCut :: Intmed c -> [TermName] -> Relmap c

-- | Create <tt>cut</tt> relkit.
relkitCut :: [TermName] -> RelkitFlow c

-- | <b>pick-term R</b>
--   
--   Construct <tt>pick-term</tt> relmap operator. This operator is similar
--   to <tt>pick</tt> instead of given terms but relation terms.
consPickTerm :: RopCons c

-- | Create <tt>pick-term</tt> relmap.
relmapPickTerm :: Intmed c -> Relmap c -> Relmap c

-- | Create <tt>pick-term</tt> relkit.
relkitPickTerm :: RelkitBinary c

-- | <b>cut-term R</b>
--   
--   Construct <tt>cut-term</tt> relmap operator. This operator is similar
--   to <tt>cut</tt> instead of given terms but relation terms.
consCutTerm :: RopCons c

-- | Create <tt>cut-term</tt> relmap.
relmapCutTerm :: Intmed c -> Relmap c -> Relmap c

-- | Create <tt>cut-term</tt> relkit.
relkitCutTerm :: RelkitBinary c

-- | <b>move /P ... -to /N ...</b>
--   
--   Construct <tt>move</tt> relmap operator for renaming term names. Terms
--   /P ... of input relation are renamed corresponding terms /N .... The
--   <tt>move</tt> operator provides same functionality as <tt>rename</tt>.
--   Operator <tt>move</tt> is suitable for renaming few terms, operator
--   <tt>rename</tt> for many terms. The following relmaps have same
--   effect:
--   
--   <pre>
--   rename /N /P /N /P ...
--   move /P ... -to /N ...
--   </pre>
consMove :: RopCons c

-- | Create <tt>move</tt> relmap.
relmapMove :: Intmed c -> ([TermName], [TermName]) -> Relmap c

-- | Create <tt>move</tt> relkit.
relkitMove :: ([TermName], [TermName]) -> RelkitFlow c

-- | <b>rename /N /P /N /P ...</b>
--   
--   Construct <tt>rename</tt> relmap operator for renaming term names.
--   Term /P is renamed to term /N for each pair of terms /N /P. The
--   <tt>rename</tt> operator provides same functionality as <tt>move</tt>.
consRename :: RopCons c

-- | Create <tt>rename</tt> relmap.
relmapRename :: Intmed c -> [TermName2] -> Relmap c

module Koshucode.Baala.Rop.Flat.Peripheral

-- | Implementation of relational operators.
ropsPeripheral :: (CContent c) => [Rop c]
consRdf :: RopCons c
consTie :: (CTie c) => RopCons c

-- | Create <tt>tie</tt> relmap.
relmapTie :: (CTie c) => Intmed c -> ([TermName], TermName) -> Relmap c

-- | Create <tt>tie</tt> relkit.
relkitTie :: (CTie c) => ([TermName], TermName) -> RelkitFlow c
consUntie :: (CTie c) => RopCons c

-- | Create <tt>untie</tt> relmap.
relmapUntie :: (CTie c) => Intmed c -> (TermName, [TermName]) -> Relmap c

-- | Create <tt>untie</tt> relkit.
relkitUntie :: (CTie c) => (TermName, [TermName]) -> RelkitFlow c
consTermName :: (CTerm c) => RopCons c

-- | Create <tt>term-name</tt> relmap.
relmapTermName :: (CTerm c) => Intmed c -> TermName -> Relmap c

-- | Create <tt>term-name</tt> relkit.
relkitTermName :: (CTerm c) => TermName -> RelkitFlow c

-- | Create <tt>today</tt> relmap.
relmapToday :: (CTime c) => Intmed c -> (TermName, Time) -> Relmap c

-- | Create <tt>today</tt> relkit.
relkitToday :: (CTime c) => (TermName, Time) -> Maybe Head -> Ab (Relkit c)

module Koshucode.Baala.Rop.Flat.TermGadget

-- | Relmap operators for manipulating term names.
--   
--   <ul>
--   <li><i><tt>prefix /P /N ...</tt></i> Add prefix <tt>/P</tt> to terms
--   <tt>/N</tt> ...</li>
--   <li><i><tt>prefix-change /P /Q</tt></i> Change prefix from <tt>/P</tt>
--   to <tt>/Q</tt>.</li>
--   <li><i><tt>unprefix /P</tt></i> Remove prefix <tt>/P</tt> from term
--   name.</li>
--   <li><i><tt>wipe</tt></i> Cut working terms.</li>
--   </ul>
ropsTermGadget :: (Ord c) => [Rop c]

-- | Add prefix to specified terms.
consPrefix :: RopCons c

-- | Create <tt>prefix</tt> relmap.
relmapPrefix :: Intmed c -> String -> [String] -> Relmap c

-- | Create <tt>prefix</tt> relkit.
relkitPrefix :: String -> [String] -> RelkitFlow c

-- | Remove prefix.
consUnprefix :: RopCons c

-- | Create <tt>unprefix</tt> relmap.
relmapUnprefix :: Intmed c -> String -> Relmap c

-- | Create <tt>unprefix</tt> relkit.
relkitUnprefix :: String -> RelkitFlow c

-- | Change prefix.
consPrefixChange :: RopCons c

-- | Create <tt>prefix-change</tt> relmap.
relmapPrefixChange :: Intmed c -> (String, String) -> Relmap c

-- | Create <tt>prefix-change</tt> relkit.
relkitPrefixChange :: (String, String) -> RelkitFlow c
consWipe :: RopCons c

-- | Create <tt>wipe</tt> relmap.
relmapWipe :: Intmed c -> Relmap c

-- | Create <tt>wipe</tt> relkit.
relkitWipe :: RelkitFlow c

module Koshucode.Baala.Rop.Flat.Elem

-- | Implementation of relational operators.
ropsElem :: (CContent c) => [Rop c]

-- | Expand elements from collection.
consMember :: (Ord c, CSet c, CList c, CText c) => RopCons c

-- | Create <tt>member</tt> relmap.
relmapMember :: (Ord c, CSet c, CList c, CText c) => Intmed c -> TermName2 -> Relmap c

-- | Create <tt>member</tt> relkit.
relkitMember :: (Ord c, CSet c, CList c, CText c) => TermName2 -> RelkitFlow c

-- | Expand index and element from collection.
--   
--   <pre>
--   &gt;&gt;&gt; ix-elem /list -to /i /elem
--   
--   &gt;&gt;&gt; iz-elem /list -to /i /elem
--   </pre>
consIndexElem :: (Ord c, CContent c) => Int -> RopCons c

-- | Create <tt>ix-elem</tt> or <tt>iz-elem</tt> relmap.
relmapIndexElem :: (Ord c, CContent c) => Int -> Intmed c -> TermName3 -> Relmap c

-- | Create <tt>ix-elem</tt> or <tt>iz-elem</tt> relkit.
relkitIndexElem :: (Ord c, CContent c) => Int -> TermName3 -> RelkitFlow c

-- | Unroll (expand) terms to tuples.
--   
--   <pre>
--   &gt;&gt;&gt; unroll /term /content -from /1 /2 /3 /4
--   </pre>
consUnroll :: (CTerm c) => RopCons c

-- | Create <tt>unroll</tt> relmap.
relmapUnroll :: (CTerm c) => Intmed c -> (TermName, TermName, [TermName]) -> Relmap c

-- | Extract elements from collection.
--   
--   <pre>
--   &gt;&gt;&gt; elem-begin /list -to /a /b /c
--   </pre>
consElemBegin :: (Ord c, CContent c) => RopCons c

-- | Create <tt>elem-begin</tt> relmap.
relmapElemBegin :: (Ord c, CContent c) => Intmed c -> (TermName, [TermName]) -> Relmap c

-- | Extract end-side elements from collection.
--   
--   <pre>
--   &gt;&gt;&gt; elem-end /list -to /a /b /c
--   </pre>
consElemEnd :: (Ord c, CContent c) => RopCons c

-- | Create <tt>elem-end</tt> relmap.
relmapElemEnd :: (Ord c, CContent c) => Intmed c -> (TermName, [TermName]) -> Relmap c
consUncollect :: (Ord c, CSet c, CList c, CText c, CDec c, CEmpty c) => RopCons c

-- | Create <tt>uncollect</tt> relmap.
relmapUncollect :: (Ord c, CSet c, CList c, CText c, CDec c, CEmpty c) => Intmed c -> (TermName, [TermName]) -> Relmap c

-- | Create <tt>uncollect</tt> relkit.
relkitUncollect :: (Ord c, CSet c, CList c, CText c, CDec c, CEmpty c) => (TermName, [TermName]) -> RelkitFlow c


-- | Text decomposition by subtext.
module Koshucode.Baala.Rop.Flat.Subtext

-- | Type of subtext parameters.
type SubtextPara = (TermName, [NameDepth], CharMatch, Bool)

-- | <b>subtext /P E</b>
--   
--   Construct <tt>subtext</tt> relmap. Decompose text content of /P by
--   matcing with subtext expression E. Terms contained in E are added to
--   output relation. Expression E is either single or bundle:
--   
--   <ul>
--   <li><i>( E1 )</i> Decompose text by single expression E.</li>
--   <li><i>{ N1 = E1 | N2 = E2 | ... }</i> Decompose text by bundle of
--   named expressions. Text decomposition starts from N1.</li>
--   </ul>
consSubtext :: (CContent c) => RopCons c

-- | Create <tt>subtext</tt> relmap.
relmapSubtext :: (CContent c) => Intmed c -> SubtextPara -> Relmap c

-- | Create <tt>subtext</tt> relkit.
relkitSubtext :: (CContent c) => SubtextPara -> Maybe Head -> Ab (Relkit c)

module Koshucode.Baala.Rop.Flat.Gadget

-- | Gadgets
--   
--   <ul>
--   <li><i><tt>contents</tt></i> Make nary relation of all contetnts.</li>
--   <li><i>@number /N [ -order /P ... \</i> <tt>] Add numbering term
--   </tt>/N<tt> ordered by </tt>/P@ ...</li>
--   <li><i>@rank /N -order /P ... [ -dense \</i> <tt>] Add term
--   </tt>/N<tt> for ranking ordered by </tt>/P@ ...</li>
--   <li><i><tt>size /N</tt></i> Calculate cardinality of input
--   relation.</li>
--   </ul>
ropsGadget :: (CContent c) => [Rop c]
consContents :: (Ord c) => RopCons c

-- | Create <tt>contents</tt> relmap.
relmapContents :: (Ord c) => Intmed c -> TermName -> Relmap c
consPoHeight :: (Ord c, CDec c) => RopCons c
consPoDepth :: (Ord c, CDec c) => RopCons c
consPoScale :: (Ord c, CDec c) => PoScaleCalc c -> RopCons c

-- | Create <tt>partial-order-height</tt> or <tt>partial-order-depth</tt>
--   relmap.
relmapPoScale :: (Ord c, CDec c) => PoScaleCalc c -> Intmed c -> TermName4 -> Relmap c

-- | Create <tt>partial-order-height</tt> or <tt>partial-order-depth</tt>
--   relkit.
relkitPoScale :: (Ord c, CDec c) => PoScaleCalc c -> TermName4 -> RelkitFlow c
consVisitDistance :: (Ord c, CDec c, CRel c) => RopCons c

-- | Create <tt>visit-distance</tt> relmap.
relmapVisitDistance :: (Ord c, CDec c, CRel c) => Intmed c -> ([TermName], [TermName], TermName, TermName) -> Map (Relmap c)
consSize :: (CDec c) => RopCons c

-- | Create <tt>size</tt> relmap.
relmapSize :: (CDec c) => Intmed c -> TermName -> Relmap c

-- | Create <tt>size</tt> relkit.
relkitSize :: (CDec c) => TermName -> RelkitFlow c
consEqlize :: (Ord c) => RopCons c

-- | Create <tt>eqlize</tt> relmap.
relmapEqlize :: (Ord c) => Intmed c -> Relmap c

-- | Create <tt>eqlize</tt> relkit.
relkitEqlize :: (Ord c) => RelkitFlow c
consDumpTree :: (CDec c) => RopCons c


-- | Fundamental operators in relational algebra.
--   
--   Tropashko's relational lattice is a kind of relational algebra.
--   Relational algebra is an algebraic formulation for relational model.
--   In constrast to Codd's original relational algebra, Tropashko lattice
--   is in more conventional and strict ways. The lattice has fundamental
--   operators from which other operators are derived.
module Koshucode.Baala.Rop.Flat.Lattice.Tropashko

-- | Construct relmap to meet relation.
consMeet :: (Ord c) => RopCons c

-- | Meet two relations.
relmapMeet :: (Ord c) => Intmed c -> SharedTerms -> Relmap c -> Relmap c

-- | Meet two relations.
relkitMeet :: (Ord c) => SharedTerms -> RelkitBinary c

-- | Construct relmap to join relation.
consJoin :: (Ord c) => RopCons c

-- | Join two relations.
relmapJoin :: (Ord c) => Intmed c -> SharedTerms -> Relmap c -> Relmap c

-- | Join multiple relations.
relmapJoinList :: (Ord c) => Intmed c -> [Relmap c] -> Relmap c

-- | Join two relations.
relkitJoin :: SharedTerms -> RelkitBinary c

-- | Shared terms for composing check.
type SharedTerms = Maybe [TermName]

-- | Calculate unmatch shared terms.
unmatchShare :: SharedTerms -> ShareSide c -> Maybe ([TermName], [TermName])


-- | Restrict by relmap
module Koshucode.Baala.Rop.Flat.Lattice.Restrict

-- | Construct relmap of existential filter.
consSome :: (Ord c) => RopCons c

-- | Relmap of existential filter.
relmapSome :: (Ord c) => Intmed c -> Map (Relmap c)

-- | Calculate existential filter.
relkitSome :: (Ord c) => RelkitBinary c

-- | Construct relmap of non-existential filter.
consNone :: (Ord c) => RopCons c

-- | Relmap of non-existential filter.
relmapNone :: (Ord c) => Intmed c -> Map (Relmap c)

-- | Calculate non-existential filter.
relkitNone :: (Ord c) => RelkitBinary c

-- | Construct some-and-meet relmap.
consSomeMeet :: (Ord c) => RopCons c

-- | Some-and-meet relmap.
--   
--   <pre>
--   some-meet R == some ( meet R )
--   </pre>
relmapSomeMeet :: (Ord c) => Intmed c -> SharedTerms -> Relmap c -> Relmap c

-- | Construct none-and-meet relmap.
consNoneMeet :: (Ord c) => RopCons c

-- | None-and-meet relmap.
--   
--   <pre>
--   none-meet R == none ( meet R )
--   </pre>
relmapNoneMeet :: (Ord c) => Intmed c -> SharedTerms -> Relmap c -> Relmap c

-- | Construct relmap for subrelation filter.
consSub :: (Ord c) => RopCons c

-- | Relmap for subrelation filter.
relmapSub :: (Ord c) => Intmed c -> SharedTerms -> Map (Relmap c)

-- | Calculate subrelation filter.
relkitSub :: (Ord c) => SharedTerms -> RelkitBinary c

-- | Construct relmap for relational composition.
consCompose :: (Ord c) => RopCons c

-- | Relational composition.
relmapCompose :: (Ord c) => Intmed c -> SharedTerms -> Map (Relmap c)

-- | Calculate relational composition.
relkitCompose :: (Ord c) => (SharedTerms -> RelkitBinary c) -> SharedTerms -> RelkitBinary c


-- | Relmap operators on relational lattice.
module Koshucode.Baala.Rop.Flat.Lattice.Rop

-- | Lattice implementations of relmap operators.
--   
--   <ul>
--   <li><i><tt>join</tt></i> Join two relations.</li>
--   <li><i><tt>meet</tt></i> Meet two relations.</li>
--   <li><i><tt>none</tt></i> Restriction by relmaps.</li>
--   <li><i><tt>some</tt></i> Restriction by relmaps.</li>
--   <li><i><tt>sub</tt></i> Restriction to subrelation.</li>
--   </ul>
ropsLattice :: (Ord c) => [Rop c]


-- | Lattice relmap operators.
module Koshucode.Baala.Rop.Flat.Lattice

module Koshucode.Baala.Rop.Flat.Check

-- | Implementation of relational operators.
--   
--   <ul>
--   <li><i>@check-term [ -just /P ... | -has /P ... | -but /N ... \</i> @]
--   Check occurences of terms for input relation.</li>
--   <li><i><tt>duplicate /P ...</tt></i> Pass duplicate tuples on
--   <tt>/P</tt> ...</li>
--   </ul>
ropsCheck :: (CContent c) => [Rop c]

module Koshucode.Baala.Rop.Flat.Control

-- | Implementation of relational operators.
ropsControl :: (CContent c) => [Rop c]
consIf :: (Ord c) => RopCons c

-- | Create <tt>if</tt> relmap.
relmapIf :: (Ord c) => Intmed c -> Relmap3 c -> Relmap c

-- | Create <tt>if</tt> relkit.
relkitIf :: (Ord c) => RelkitConfl c
consWhen :: (Ord c) => RopCons c
consUnless :: (Ord c) => RopCons c
consFix :: (Ord c) => RopCons c
consFixJoin :: (Ord c) => RopCons c
consEqual :: (Ord c) => RopCons c

-- | Create <tt>equal</tt> relmap.
relmapEqual :: (Ord c) => Intmed c -> Map (Relmap c)

-- | Create <tt>equal</tt> relkit.
relkitEqual :: (Ord c) => RelkitBinary c

module Koshucode.Baala.Rop.Flat.Bundle
ropsFlat :: (CContent c) => [Rop c]


-- | Operators in Koshucode.
module Koshucode.Baala.Rop.Flat
